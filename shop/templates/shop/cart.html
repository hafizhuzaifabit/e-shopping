{% extends 'shop/base.html' %}
{% load shop_tags %}

{% block title %}Cart - ShopSmart{% endblock %}

{% block content %}
<section class="section">
    <div class="container">
        <h1 class="fade-in" style="text-align: center; margin-bottom: 3rem;">Your Shopping Cart</h1>
        
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
            <!-- Cart Items -->
            <div>
                {% if cart_items %}
                    <div class="cart-items fade-in">
                        {% for item in cart_items %}
                            <div class="cart-item">
                                <img src="{{ item.product.get_image_url }}" alt="{{ item.product.name }}" class="cart-item-image">
                                <div class="cart-item-details">
                                    <h3 class="cart-item-name">{{ item.product.name }}</h3>
                                    <p style="color: var(--gray-medium); margin-bottom: 0.5rem;">Quantity: {{ item.quantity }}</p>
                                    <p class="cart-item-price">${{ item.product.price|format_price }} each</p>
                                    <p style="font-weight: 600; margin-top: 0.5rem;">Item Total: ${{ item.total_price|format_price }}</p>
                                </div>
                                <a href="{% url 'remove_from_cart' item.id %}" class="btn btn-outline" style="align-self: flex-start;">Remove</a>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div class="card fade-in" style="padding: 3rem; text-align: center;">
                        <h2 style="margin-bottom: 1rem;">Your cart is empty</h2>
                        <p style="color: var(--gray-medium); margin-bottom: 2rem;">Start shopping to add items to your cart.</p>
                        <a href="{% url 'products' %}" class="btn btn-primary">Browse Products</a>
                    </div>
                {% endif %}
            </div>
            
            <!-- Cart Summary -->
            {% if cart_items %}
                <div class="cart-summary fade-in fade-in-delay-1">
                    <h2>Order Summary</h2>
                    <div style="margin-top: 2rem;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--gray-light);">
                            <span style="font-weight: 600;">Subtotal:</span>
                            <span>${{ total_price|format_price }}</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid var(--gray-light);">
                            <span style="font-weight: 600;">Shipping:</span>
                            <span>Free</span>
                        </div>
                        <div class="total-price" style="margin-top: 1rem;">
                            Total: ${{ total_price|format_price }}
                        </div>
                    </div>
                    <a href="{% url 'products' %}" class="btn btn-outline" style="width: 100%; margin-top: 2rem;">Continue Shopping</a>
                </div>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}
